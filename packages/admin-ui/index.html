<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <!-- Required Stylesheets -->
    <link type="text/css" rel="stylesheet" href="https://unpkg.com/bootstrap/dist/css/bootstrap.min.css" />
    <link type="text/css" rel="stylesheet" href="https://unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.css" />

    <!-- Load polyfills to support older browsers -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es2015%2CIntersectionObserver"></script>

    <!-- Required scripts -->
    <!-- Vue itself -->
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <!-- bootstrap-vue (bootstap components for Vue, https://bootstrap-vue.js.org/docs/components/ -->
    <script src="https://unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.js"></script>
    <!-- vue-resource (http client) -->
    <script src="https://cdn.jsdelivr.net/npm/vue-resource@1.5.1"></script>
  </head>
  <body>
    <div id="app">
      <b-container>
        <b-input-group prepend="ID персонажа">
          <b-form-input type="number" v-model="desiredCharacterId"></b-form-input>
          <b-input-group-append>
            <b-button variant="outline-primary" v-on:click="chooseCharacter">Обновить</b-button>
          </b-input-group-append>
        </b-input-group>
        <span v-if="characterModel">
          <b-card no-body>
            <b-card-body>
              <b-table-simple small>
                <caption>
                  Персонаж {{ characterModel.modelId }}, состояние на {{ new Date(characterModel.timestamp).toLocaleString("ru-RU") }}
                </caption>
                <b-tbody>
                  <b-tr>
                    <b-th>Состояние физического тела</b-th>
                    <b-td> {{ characterModel.healthState }}</b-td>
                  </b-tr>
                  <b-tr>
                    <b-th>Максимальные хиты</b-th>
                    <b-td> {{ characterModel.maxHp }}</b-td>
                  </b-tr>
                  <b-tr>
                    <b-th>Magic</b-th>
                    <b-td>{{ characterModel.magic }}</b-td>
                  </b-tr>
                  <b-tr>
                    <b-th>Body</b-th>
                    <b-td>{{ characterModel.body }}</b-td>
                  </b-tr>
                  <b-tr>
                    <b-th>Intelligence</b-th>
                    <b-td>{{ characterModel.body }}</b-td>
                  </b-tr>
                  <b-tr>
                    <b-th>Charisma</b-th>
                    <b-td>{{ characterModel.charisma }}</b-td>
                  </b-tr>
                  <b-tr>
                    <b-th>Resonance</b-th>
                    <b-td>{{ characterModel.resonance }}</b-td>
                  </b-tr>
                  <b-tr>
                    <b-th>Максимальное время на хосте</b-th>
                    <b-td>{{ characterModel.maxTimeAtHost }}</b-td>
                  </b-tr>
                  <b-tr>
                    <b-th>Скорость входа на хост</b-th>
                    <b-td>{{ characterModel.hostEntrySpeed }}</b-td>
                  </b-tr>
                  <b-tr>
                    <b-th>Конверсия атаки</b-th>
                    <b-td>{{ characterModel.conversionAttack }}</b-td>
                  </b-tr>
                  <b-tr>
                    <b-th>Конверсия файрвола</b-th>
                    <b-td>{{ characterModel.conversionFirewall }}</b-td>
                  </b-tr>
                  <b-tr>
                    <b-th>Конверсия слизи</b-th>
                    <b-td>{{ characterModel.conversionSleaze }}</b-td>
                  </b-tr>
                  <b-tr>
                    <b-th>Конверсия датапроцессинга</b-th>
                    <b-td>{{ characterModel.conversionDataprocessing }}</b-td>
                  </b-tr>
                  <b-tr>
                    <b-th>Число администрируемых хостов</b-th>
                    <b-td>{{ characterModel.adminHostNumber }}</b-td>
                  </b-tr>
                  <b-tr>
                    <b-th>Уровень спрайтов</b-th>
                    <b-td>{{ characterModel.spriteLevel }}</b-td>
                  </b-tr>
                  <b-tr>
                    <b-th>Снижение отката</b-th>
                    <b-td> {{ characterModel.magicFeedbackReduction }}</b-td>
                  </b-tr>
                  <b-tr>
                    <b-th>Восстановление Магии</b-th>
                    <b-td>{{ characterModel.magicRecoverySpeed }}</b-td>
                  </b-tr>
                  <b-tr>
                    <b-th>Коэффициент Сопротивления Духов</b-th>
                    <b-td>{{ characterModel.spiritResistanceMultiplier }}</b-td>
                  </b-tr>
                  <b-tr>
                    <b-th>Коэффициент Чтения Астральных Следов</b-th>
                    <b-td>{{ characterModel.auraReadingMultiplier }}</b-td>
                  </b-tr>
                  <b-tr>
                    <b-th>Коэффициент Отчетливости Астральных Следов</b-th>
                    <b-td>{{ characterModel.auraMarkMultiplier }}</b-td>
                  </b-tr>
                  <b-tr>
                    <b-th>Максимальный размер этической группы</b-th>
                    <b-td>{{ characterModel.ethicGroupMaxSize }}</b-td>
                  </b-tr>
                  <b-tr>
                    <b-th>Обнаруживаемый уровень фуфломицина в чаммере</b-th>
                    <b-td>{{ characterModel.chemoBodyDetectableThreshold }}</b-td>
                  </b-tr>
                  <b-tr>
                    <b-th>Обнаруживаемый уровень фуфломицина в таблетке</b-th>
                    <b-td>{{ characterModel.chemoPillDetectableThreshold }}</b-td>
                  </b-tr>
                  <b-tr>
                    <b-th>Химота Базовый Эффект</b-th>
                    <b-td>{{ characterModel.chemoBaseEffectThreshold }}</b-td>
                  </b-tr>
                  <b-tr>
                    <b-th>Химота Супер Эффект</b-th>
                    <b-td>{{ characterModel.chemoSuperEffectThreshold }}</b-td>
                  </b-tr>
                  <b-tr>
                    <b-th>Химота Кризис</b-th>
                    <b-td>{{ characterModel.chemoCrysisThreshold }}</b-td>
                  </b-tr>
                  <b-tr>
                    <b-th>Безусловный доход в процентах от оборота</b-th>
                    <b-td>{{ characterModel.stockGainPercentage }}</b-td>
                  </b-tr>
                  <b-tr>
                    <b-th>Скидка на оружие и броню</b-th>
                    <b-td>{{ characterModel.discounts.weaponsArmor }}</b-td>
                  </b-tr>
                  <b-tr>
                    <b-th>Скидка на дроны</b-th>
                    <b-td>{{ characterModel.discounts.drones }}</b-td>
                  </b-tr>
                  <b-tr>
                    <b-th>Скидка на химоту</b-th>
                    <b-td>{{ characterModel.discounts.chemo }}</b-td>
                  </b-tr>
                  <b-tr>
                    <b-th>Скидка на импланты</b-th>
                    <b-td>{{ characterModel.discounts.implants }}</b-td>
                  </b-tr>
                  <b-tr>
                    <b-th>Скидка на магические штуки</b-th>
                    <b-td>{{ characterModel.discounts.magicStuff }}</b-td>
                  </b-tr>
                </b-tbody>
              </b-table-simple>
            </b-card-body>
          </b-card>
          <b-card no-body>
            <b-card-header>
              <b-button block href="#" v-b-toggle.passive_abilities variant="info">
                Всего пассивных способностей: {{ characterModel.passiveAbilities.length }}
              </b-button>
            </b-card-header>
            <b-collapse id="passive_abilities">
              <b-card-body>
                <b-table :items="characterModel.passiveAbilities"></b-table>
              </b-card-body>
            </b-collapse>
          </b-card>
          <b-card no-body>
            <b-card-header>
              <b-button block href="#" v-b-toggle.active_abilities variant="info">
                Всего активных способностей: {{ characterModel.activeAbilities.length }}
              </b-button>
            </b-card-header>
            <b-collapse id="active_abilities">
              <b-card-body>
                <b-table :items="characterModel.activeAbilities"></b-table>
              </b-card-body>
            </b-collapse>
          </b-card>
          <b-card no-body>
            <b-card-header>
              <b-button block href="#" v-b-toggle.spells variant="info">
                Всего спеллов: {{ characterModel.spells.length }}
              </b-button>
            </b-card-header>
            <b-collapse id="spells">
              <b-card-body>
                <b-table :items="characterModel.spells"></b-table>
              </b-card-body>
            </b-collapse>
          </b-card>
          <b-card no-body>
            <b-card-header>Добавление/удаление фичи (без проверки пререквизитов)</b-card-header>
            <b-card-body>
              <b-form-select v-model="selectedFeature">
                <option v-for="feature in allFeatures" :value="feature.id"> {{ feature.name }} </option>
              </b-form-select>
              <b-button variant="success" v-on:click="addFeature">Добавить</b-button>
              <b-button variant="danger" v-on:click="removeFeature">Удалить</b-button>
              (Если добавляемая фича уже присутствует в персонаже/удаляемая фича не присутствует - ничего не произойдет!)
            </b-card-body>
          </b-card>
          <b-card no-body>
            <b-card-header>Ранения и смерть</b-card-header>
            <b-card-body>
              <b-button variant="danger" v-on:click="wound">Упасть в тяжран</b-button>
              <b-button variant="success" v-on:click="revive">ОТЛАДКА: Воскресить</b-button>
              <b-input-group prepend="ID персонажа">
                <b-form-input type="number" v-model="clinicalDeathTarget"></b-form-input>
                <b-input-group-append>
                  <b-button variant="danger" v-on:click="clinicalDeathOnTarget">Добить</b-button>
                </b-input-group-append>
              </b-input-group>
            </b-card-body>
          </b-card>
          <b-card no-body>
            <b-card-header>Сканирование QR-кода</b-card-header>
            <b-card-body>
              <b-input-group prepend="ID QR-кода">
                <b-form-input type="number" v-model="qrCodeId"></b-form-input>
                <b-input-group-append>
                  <b-button variant="success" v-on:click="scanQr">Отсканировать</b-button>
                </b-input-group-append>
              </b-input-group>
            </b-card-body>
          </b-card>
          <b-card no-body>
            <b-card-header>
              Этика
              <b-button block href="#" v-b-toggle.ethic_details variant="info">
                Подробности
              </b-button>
            </b-card-header>
            <b-card-body>
              <b-collapse id="ethic_details">
                <b-table :items="characterModel.ethicState"></b-table>
                <b-table :items="characterModel.ethicTrigger">
                  <template v-slot:cell(Id)="row">
                    <b-button size="sm" variant="warning" @click="ethicTrigger(row.item.id)" class="mr-1">
                      Активировать
                    </b-button>
                  </template>
                </b-table>
              </b-collapse>
              <div>
                <b-input-group prepend="Насилие, контроль, индивидуализм, разум" class="mb-2">
                  <b-form-select v-model="violence" :options="ethicOptions"></b-form-select>
                  <b-form-select v-model="control" :options="ethicOptions"></b-form-select>
                  <b-form-select v-model="individualism" :options="ethicOptions"></b-form-select>
                  <b-form-select v-model="mind" :options="ethicOptions"></b-form-select>
                  <b-input-group-append>
                    <b-button variant="success" v-on:click="ethicSet">Установить</b-button>
                  </b-input-group-append>
                </b-input-group>
              </div>
            </b-card-body>
          </b-card>
        </span>
      </b-container>
    </div>
    <script src="index.js"></script>
  </body>
</html>
