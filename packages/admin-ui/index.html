<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <!-- Required Stylesheets -->
    <link type="text/css" rel="stylesheet" href="https://unpkg.com/bootstrap/dist/css/bootstrap.min.css" />
    <link type="text/css" rel="stylesheet" href="https://unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.css" />

    <!-- Load polyfills to support older browsers -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es2015%2CIntersectionObserver"></script>

    <!-- Required scripts -->
    <!-- Vue itself -->
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <!-- bootstrap-vue (bootstap components for Vue, https://bootstrap-vue.js.org/docs/components/ -->
    <script src="https://unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.js"></script>
    <!-- vue-resource (http client) -->
    <script src="https://cdn.jsdelivr.net/npm/vue-resource@1.5.1"></script>
  </head>
  <body>
    <div id="app">
      <b-container>
        <b-input-group prepend="ID персонажа">
          <b-form-input type="number" v-model="desiredCharacterId"></b-form-input>
          <b-input-group-append>
            <b-button variant="outline-primary" v-on:click="chooseCharacter">Обновить</b-button>
          </b-input-group-append>
        </b-input-group>
        <span v-if="characterModel">
          <b-card no-body>
            <b-card-body>
              <b-table-simple>
                <caption>
                  Персонаж {{ characterModel.modelId }}, состояние на {{ new Date(characterModel.timestamp).toLocaleString("ru-RU") }}
                </caption>
                <b-tbody>
                  <b-tr>
                    <b-th>Состояние физического тела</b-th>
                    <b-td> {{ characterModel.healthState }}</b-td>
                  </b-tr>
                  <b-tr>
                    <b-th>Максимальные хиты</b-th>
                    <b-td> {{ characterModel.maxHp }}</b-td>
                  </b-tr>
                  <b-tr>
                    <b-th>Magic</b-th>
                    <b-td>{{ characterModel.magic }}</b-td>
                  </b-tr>
                  <b-tr>
                    <b-th>Body</b-th>
                    <b-td>{{ characterModel.body }}</b-td>
                  </b-tr>
                  <b-tr>
                    <b-th>Intelligence</b-th>
                    <b-td>{{ characterModel.body }}</b-td>
                  </b-tr>
                  <b-tr>
                    <b-th>Charisma</b-th>
                    <b-td>{{ characterModel.charisma }}</b-td>
                  </b-tr>
                  <b-tr>
                    <b-th>Resonance</b-th>
                    <b-td>{{ characterModel.resonance }}</b-td>
                  </b-tr>
                  <b-tr>
                    <b-th>Снижение отката</b-th>
                    <b-td> {{ characterModel.magicFeedbackReduction }}</b-td>
                  </b-tr>
                  <b-tr>
                    <b-th>Восстановление Магии</b-th>
                    <b-td>{{ characterModel.magicRecoverySpeed }}</b-td>
                  </b-tr>
                  <b-tr>
                    <b-th>Коэффициент Сопротивления Духов</b-th>
                    <b-td>{{ characterModel.spiritResistanceMultiplier }}</b-td>
                  </b-tr>
                  <b-tr>
                    <b-th>Коэффициент Чтения Астральных Следов</b-th>
                    <b-td>{{ characterModel.auraReadingMultiplier }}</b-td>
                  </b-tr>
                  <b-tr>
                    <b-th>Коэффициент Отчетливости Астральных Следов</b-th>
                    <b-td>{{ characterModel.auraMarkMultiplier }}</b-td>
                  </b-tr>
                </b-tbody>
              </b-table-simple>
            </b-card-body>
          </b-card>
          <b-card no-body>
            <b-card-header>
              <b-button block href="#" v-b-toggle.features variant="info">Всего фич: {{ characterModel.features.length }}</b-button>
            </b-card-header>
            <b-collapse id="features">
              <b-card-body>
                <b-table :items="characterModel.features"></b-table>
              </b-card-body>
            </b-collapse>
          </b-card>
          <b-card no-body>
            <b-card-header>Добавление/удаление фичи (без проверки пререквизитов)</b-card-header>
            <b-card-body>
              <b-form-select v-model="selectedFeature">
                <option v-for="feature in allFeatures" :value="feature.id"> {{ feature.name }} </option>
              </b-form-select>
              <b-button variant="success" v-on:click="addFeature">Добавить</b-button>
              <b-button variant="danger" v-on:click="removeFeature">Удалить</b-button>
              (Если добавляемая фича уже присутствует в персонаже/удаляемая фича не присутствует - ничего не произойдет!)
            </b-card-body>
          </b-card>
          <b-card no-body>
            <b-card-header>Ранения и смерть</b-card-header>
            <b-card-body>
              <b-button variant="danger" v-on:click="wound">Упасть в тяжран</b-button>
              <b-button variant="success" v-on:click="revive">ОТЛАДКА: Воскресить</b-button>
              <b-input-group prepend="ID персонажа">
                <b-form-input type="number" v-model="clinicalDeathTarget"></b-form-input>
                <b-input-group-append>
                  <b-button variant="danger" v-on:click="clinicalDeathOnTarget">Добить</b-button>
                </b-input-group-append>
              </b-input-group>
            </b-card-body>
          </b-card>
          <b-card no-body>
            <b-card-header>Сканирование QR-кода</b-card-header>
            <b-card-body>
              <b-input-group prepend="ID QR-кода">
                <b-form-input type="number" v-model="qrCodeId"></b-form-input>
                <b-input-group-append>
                  <b-button variant="success" v-on:click="scanQr">Отсканировать</b-button>
                </b-input-group-append>
              </b-input-group>
            </b-card-body>
          </b-card>
        </span>
      </b-container>
    </div>
    <script src="index.js"></script>
  </body>
</html>
