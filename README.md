# Монорепозиторий для всех сервисов, написанных на Node.JS/Typescript
[![Build Status](https://travis-ci.org/sr-2020/nodejs-monorepo.svg?branch=master)](https://travis-ci.org/sr-2020/nodejs-monorepo)

## Установка глобальных зависимостей
Для разработки/сборки необходимы следующие глобальные зависимости:
* [Node.JS](https://nodejs.org). Версия 10.
* [yarn](https://yarnpkg.com/en/). Менеджер зависимостей (как `npm`, но с бонусами).
* [lerna](https://github.com/lerna/lerna). Утилита, упрощающая работу с nodejs-монорепозиториями. Установка: `yarn global add lerna`.
* [Visual Studio Code](https://code.visualstudio.com/) с установленными плагинами
  * TSLint
  * Prettier - Code formatter
  * TypeScript Hero
  * (опционально) npm
  * (опционально) npm Intellisense
  
  Использование другого редактора (или неиспользование плагинов) скорее всего приведет к нестандартному форматированию файлов
  (отступы, ...), что сломает Travis-тесты.

Все остальные зависимости (включая Typescript) будут установлены локально c правильными версиями посредством `yarn`.

## Разработка
1. Склонировать репозиторий (`git clone https://github.com/sr-2020/nodejs-monorepo.git`) и перейти в соответствующую папку 
   (`cd nodejs-monorepo`).
2. Установить локальные зависимости: `yarn`. Рекомендуется делать каждый раз после `git pull`, 
   т.к. набор зависимостей может (и будет) меняться.
3. (опционально) Проверить, что все компилируется (`lerna run build`) и что тесты проходятся (`lerna run test`).

Перед тем, как пушить в репозиторий, необходимо проверить что следующие команды не выдают ошибок:
* Сборка: `lerna run build`.
* Тесты: `lerna run test`.
* Linter (проверка форматирования, стиля, отсутствия неиспользованных переменных и т.п.): `lerna run lint`. 
  При редакторировании кода в Visual Studio Code с рекомендованным набором плагинов все файлы должны правильно форматироваться 
  при сохранении. Если этого почему-то не случилось, можно запустить `lerna run lint:fix`, что должно все исправить 
  (или выдать ошибку о том, что нужно исправить вручную).
